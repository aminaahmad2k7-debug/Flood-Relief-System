<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ district.name }} District - Flood Relief System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bundle.css') }}">
</head>

<body>

<!-- Header -->
<header class="header">
    <div class="header__container container">
        <a href="{{ url_for('index') }}" class="header__logo">
            <span>üåä</span>
            <span>Flood Relief System</span>
        </a>

        <nav class="nav">
            <ul class="nav__list" id="navList">
                <li class="nav__item">
                    <a href="{{ url_for('upload_page') }}" class="nav__link">Upload Data</a>
                </li>
                <li class="nav__item">
                    <a href="{{ url_for('index') }}" class="nav__link">Dashboard</a>
                </li>
                <li class="nav__item">
                    <a href="{{ url_for('districts') }}" class="nav__link nav__link--active">
                        Districts
                    </a>
                </li>
            </ul>

            <button class="nav__toggle" id="navToggle" aria-label="Toggle navigation">
                <span class="nav__toggle-icon"></span>
            </button>
        </nav>
    </div>
</header>

<!-- Main -->
<main class="main">
    <div class="container">

        <!-- Breadcrumb -->
        <nav aria-label="Breadcrumb" class="mb-4">
            <ol style="display:flex; list-style:none; gap:8px; color: #64748b;">
                <li><a href="{{ url_for('index') }}" style="color: #3b82f6; text-decoration: none;">Dashboard</a></li>
                <li>/</li>
                <li><a href="{{ url_for('districts') }}" style="color: #3b82f6; text-decoration: none;">Districts</a></li>
                <li>/</li>
                <li aria-current="page" style="color: #0f172a; font-weight: 600;">{{ district.name }}</li>
            </ol>
        </nav>

        <!-- Header -->
        <div class="page-header">
            <h1 class="page-title">{{ district.name }} District</h1>
            <p class="page-subtitle">Detailed flood impact report and analysis</p>
        </div>

        <!-- Metrics -->
        <section class="section">
            <div class="grid grid--4">
                <div class="metric">
                    <p class="metric__label">Population Affected</p>
                    <h3 class="metric__value">{{ "{:,}".format(district.population) }}</h3>
                </div>

                <div class="metric">
                    <p class="metric__label">Houses Damaged</p>
                    <h3 class="metric__value">{{ "{:,}".format(district.houses) }}</h3>
                </div>

                <div class="metric">
                    <p class="metric__label">Casualties</p>
                    <h3 class="metric__value">{{ district.casualties }}</h3>
                </div>

                <div class="metric">
                    <p class="metric__label">Relief Required</p>
                    <h3 class="metric__value">
                        PKR {{ "{:,}".format(district.relief) }}
                    </h3>
                </div>
            </div>
        </section>

        <!-- Details -->
        <div class="grid grid--2">
            <div class="card">
                <div class="card__header">
                    <h2 class="card__title">District Information</h2>
                </div>
                <div class="card__body">
                    <table style="width:100%; border-collapse: collapse;">
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.75rem 0; color: #64748b;">District Name</td>
                            <td style="padding: 0.75rem 0; text-align:right; font-weight: 600;">{{ district.name }}</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.75rem 0; color: #64748b;">Date Recorded</td>
                            <td style="padding: 0.75rem 0; text-align:right; font-weight: 600;">{{ district.date }}</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.75rem 0; color: #64748b;">Population Affected</td>
                            <td style="padding: 0.75rem 0; text-align:right; font-weight: 600;">{{ "{:,}".format(district.population) }}</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.75rem 0; color: #64748b;">Houses Damaged</td>
                            <td style="padding: 0.75rem 0; text-align:right; font-weight: 600;">{{ "{:,}".format(district.houses) }}</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.75rem 0; color: #64748b;">Casualties</td>
                            <td style="padding: 0.75rem 0; text-align:right; font-weight: 600;">{{ district.casualties }}</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem 0; color: #64748b;">Total Relief Amount Required</td>
                            <td style="padding: 0.75rem 0; text-align:right; font-weight: 600; color: #3b82f6;">
                                PKR {{ "{:,}".format(district.relief) }}
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- Analysis -->
            <div class="card">
                <div class="card__header">
                    <h2 class="card__title">Impact Analysis</h2>
                </div>
                <div class="card__body">
                    <div style="margin-bottom: 1.5rem;">
                        <p style="color: #64748b; margin-bottom: 0.25rem; font-size: 0.875rem;">Relief required per Person</p>
                        <p style="font-size: 1.5rem; font-weight: 700; color: #3b82f6;">
                            PKR {{ "{:,}".format((district.relief // district.population) if district.population else 0) }}
                        </p>
                    </div>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <p style="color: #64748b; margin-bottom: 0.25rem; font-size: 0.875rem;">Relief required per House</p>
                        <p style="font-size: 1.5rem; font-weight: 700; color: #22c55e;">
                            PKR {{ "{:,}".format((district.relief // district.houses) if district.houses else 0) }}
                        </p>
                    </div>
                    
                    <div>
                        <p style="color: #64748b; margin-bottom: 0.25rem; font-size: 0.875rem;">Casualty Rate</p>
                        <p style="font-size: 1.5rem; font-weight: 700; color: #ef4444;">
                            {{ "%.2f"|format((district.casualties / district.population * 100) if district.population else 0) }}%
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Back Button -->
        <div class="mt-4">
            <a href="{{ url_for('districts') }}" class="btn btn--outline">
                ‚Üê Back to All Districts
            </a>
        </div>

    </div>
</main>

<!-- Footer -->
<footer class="footer">
    <div class="footer__container container">
        <p>¬© 2025 Flood Relief System</p>
    </div>
</footer>

<script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>